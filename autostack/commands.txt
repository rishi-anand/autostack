 keystone tenant-create --name admin --description "Admin Tenant"
 keystone user-create --name admin --pass ADMIN_PASS --email EMAIL_ADDRESS
 keystone role-create --name admin
 keystone user-role-add --user admin --tenant admin --role admin
 keystone tenant-create --name demo --description "Demo Tenant"
 keystone user-create --name demo --tenant demo --pass DEMO_PASS --email EMAIL_ADDRESS
 keystone tenant-create --name service --description "Service Tenant"
 keystone service-create --name keystone --type identity \
  --description "OpenStack Identity"
  
  keystone endpoint-create \
  --service-id $(keystone service-list | awk '/ identity / {print $2}') \
  --publicurl http://controller10:5000/v2.0 \
  --internalurl http://controller10:5000/v2.0 \
  --adminurl http://controller10:35357/v2.0 \
  --region regionOne
  
  #verify keystone
  
  unset OS_SERVICE_TOKEN OS_SERVICE_ENDPOINT
  
  keystone --os-tenant-name admin --os-username admin --os-password welcome \
  --os-auth-url http://controller10:35357/v2.0 token-get
  
  keystone --os-tenant-name admin --os-username admin --os-password welcome \
  --os-auth-url http://controller10:35357/v2.0 tenant-list
  
  keystone --os-tenant-name admin --os-username admin --os-password welcome \
  --os-auth-url http://controller10:35357/v2.0 user-list
  
  keystone --os-tenant-name admin --os-username admin --os-password welcome \
  --os-auth-url http://controller10:35357/v2.0 role-list
  
  keystone --os-tenant-name demo --os-username demo --os-password welcome \
  --os-auth-url http://controller10:35357/v2.0 token-get
  
  keystone --os-tenant-name demo --os-username demo --os-password DEMO_PASS \
  --os-auth-url http://controller10:35357/v2.0 user-list
  #above command : You are not authorized to perform the requested action, admin_required. (HTTP 403)
  
  #verification keystone ends
  
  
  
  
  #______________________IMAGE________________________________
  
  # edit admin-openrc.sh
  # edit demo-openrc.sh
  mysql -u root -p
  #CREATE DATABASE glance;
  GRANT ALL PRIVILEGES ON glance.* TO 'glance'@'localhost' \
  IDENTIFIED BY 'welcome';
  
  
  
  
  
  GRANT ALL PRIVILEGES ON glance.* TO 'glance'@'%' \
  IDENTIFIED BY 'welcome';
  
  source admin-openrc.sh 
  keystone user-create --name glance --pass welcome
  
   keystone user-role-add --user glance --tenant service --role admin
 
  keystone service-create --name glance --type image \
  --description "OpenStack Image Service"
  
  keystone endpoint-create \
  --service-id $(keystone service-list | awk '/ image / {print $2}') \
  --publicurl http://controller10:9292 \
  --internalurl http://controller10:9292 \
  --adminurl http://controller10:9292 \
  --region regionOne
  
   apt-get install glance python-glanceclient
  #/etc/glance/glance-api.conf edit
  #/etc/glance/etc/glance/glance-registry.conf
  
  su -s /bin/sh -c "glance-manage db_sync" glance

 service glance-registry restart
 service glance-api restart
 
 rm -f /var/lib/glance/glance.sqlite
 
  mkdir /tmp/images
 wget -P /tmp/images http://download.cirros-cloud.net/0.3.3/cirros-0.3.3-x86_64-disk.img
 
 
 source admin-openrc.sh
 
 glance image-create --name "cirros-0.3.3-x86_64" --file /tmp/images/cirros-0.3.3-x86_64-disk.img \
  --disk-format qcow2 --container-format bare --is-public True --progress
 
 
 glance image-list
 
 rm -r /tmp/images
 
 
 #______________________ COMPUTE________________________
 
 
 mysql -u root -p
 
 
 GRANT ALL PRIVILEGES ON nova.* TO 'nova'@'localhost' \
  IDENTIFIED BY 'welcome';
 
 GRANT ALL PRIVILEGES ON nova.* TO 'nova'@'%' \
  IDENTIFIED BY 'welcome';
 
 source admin-openrc.sh
 keystone user-create --name nova --pass NOVA_PASS
 keystone user-role-add --user nova --tenant service --role admin
 
 keystone service-create --name nova --type compute \
  --description "OpenStack Compute"
  
  keystone endpoint-create \
  --service-id $(keystone service-list | awk '/ compute / {print $2}') \
  --publicurl http://controller10:8774/v2/%\(tenant_id\)s \
  --internalurl http://controller10:8774/v2/%\(tenant_id\)s \
  --adminurl http://controller10:8774/v2/%\(tenant_id\)s \
  --region regionOne
  
  apt-get install nova-api nova-cert nova-conductor nova-consoleauth \
  nova-novncproxy nova-scheduler python-novaclient -y
  
  #edit /etc/nova/nova.conf 
  
  
  service nova-api restart
service nova-cert restart
 service nova-consoleauth restart
 service nova-scheduler restart
 service nova-conductor restart
 service nova-novncproxy restart
 
 
 
 
 
 
 
 
 
 
 
 keystone endpoint-create \
  --service-id $(keystone service-list | awk '/ network / {print $2}') \
  --publicurl http://controller10:9696 \
  --adminurl http://controller10:9696 \
  --internalurl http://controller10:9696 \
  --region regionOne
  
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 neutron subnet-create ext-net --name ext-subnet \
  --allocation-pool start=192.168.4.210,end=192.168.4.225 \
  --disable-dhcp --gateway 192.168.4.1 192.168.4.0/24
  
  
  
  
  
  sudo ip netns exec qrouter-2f675dba-de52-4e36-a977-14b595371e2c ping 10.89.116.37

  
  
  
  
  
  
  
  
  
  
  